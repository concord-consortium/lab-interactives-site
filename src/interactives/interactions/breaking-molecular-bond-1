{
  "title": "Breaking a Molecular Bond",
  "publicationStatus": "draft",
  "labEnvironment": "production",
  "subtitle": "",
  "category": "",
  "subCategory": "",
  "screenshot": "",
  "aspectRatio": 0.9,
  "fontScale": 1,
  "lang": "en-US",
  "i18nMetadata": "",
  "helpOnLoad": false,
  "about": "",
  "theme": "",
  "models": [
    {
      "type": "md2d",
      "id": "forming-molecular-bond",
      "url": "models/lab-version/1/md2d/interactions/breaking-molecular-bond.json",
      "onLoad": [
        "callAt(0, function() { set('fakeTotalEnergy', get('totalEnergy')); });",
        "onPropertyChange('numberOfElement1AtomsInView', function() {",
        "  if (get('numberOfElement1AtomsInView') < 2) {",
        "    stop();",
        "  }",
        "});",
        "setComponentDisabled('molecule-selector', false);",
        "setComponentDisabled('velocity-slider', false);",
        "onStart(function() {",
        "setComponentDisabled('molecule-selector', true);",
        "setComponentDisabled('velocity-slider', true);",
        "});"
      ],
      
      "viewOptions": {
        "controlButtons": "play_reset_step",
      "controlButtonStyle": "video"
      }
      }
  ],
  "propertiesToRetain": [],
  "parameters": [
    {
      "name": "mass",
      "initialValue": 10,
      "onChange": "setElementProperties(0,{mass: value});"
    },
    {
      "name": "velocity",
      "initialValue": 0.014,
      "onChange": "setAtomProperties(2,{vx: -value});"
    },
    {
      "name": "molecule",
      "initialValue": 1,
      "onChange": [
        "var length, strength, x0, y0, x1, y1;",
        "if (value == 1) {",
        "  length = 0.074;",
        "  x0 = 10.848516;",
        "  y0 = 11.02586;",
        "  x1 = 10.9;",
        "  y1 = 10.97;",
        "  setBondEnergy('1-1',4.52);",
        "} else if (value == 2) {",
        "  length = 0.121;",
        "  x0 = 10.868516;",
        "  y0 = 11.028;",
        "  x1 = 10.93;",
        "  y1 = 10.927;",
        "  setBondEnergy('2-2',5.15);",
        "} else if (value == 3) {",
        "  length = 0.145;",
        "  x0 = 10.858516;",
        "  y0 = 11.03586;",
        "  x1 = 10.95;",
        "  y1 = 10.92;",
        "  setBondEnergy('3-3',9.79);",
        "}",
        "setAtomProperties(0,{element: value, x: x0, y: y0});",
        "setAtomProperties(1,{element: value, x: x1, y: y1});",
        "setRadialBondProperties(0, {length: length})"
      ]
    },
    {
      "name": "slow-motion",
      "initialValue": false,
      "onChange": "if (value) set('timeStep', 0.003); else set('timeStep', 0.01);"
    }
  ],
  "outputs": [
    {
      "name": "element1KE",
      "value": "return atomsKe([0,1]);"
    },
    {
      "name": "element2KE",
      "value": "return atomsKe([2]);"
    },
    {
      "name": "numberOfElement1AtomsInView",
      "value": [
        "var radius = Math.max(getElementProperties(1).sigma, getElementProperties(1).sigma) / 2;",
        "var left = get('viewPortX') - radius;",
        "var bottom = get('viewPortY') - radius;",
        "var width = get('viewPortWidth') + 2*radius;",
        "var height = get('viewPortHeight') + 2*radius;",
        "return atomsWithinRect(left, bottom, width, height).filter(function(x) { return x < 2; }).length;"
      ]
    }
  ],
  "filteredOutputs": [],
  "helpTips": [],
  "dataSets": [
      {
      "name": "table-graph-dataset",
      "properties": [
        "Velocity/Temp",
        "Hyderogen",
        "Oxygen",
        "Nitrogen"
      ],
        "serializableProperties": "all",
      "streamDataFromModel": false,
      "clearOnModelReset": false,
         "initialData": {
        "Velocity/Temp": [
          "0.01400",
          "0.01425",
          "0.01450",
          "0.01475",
          "0.01500",
          "0.01525",
          "0.01550",
          "0.01575",
          "0.01600",
          "0.01625",
          "0.01650",
          "0.01675",
          "0.01700",
          "0.01725",
          "0.01750",
          "0.01775",
          "0.01800",
          "0.01825",
          "0.01850",
          "0.01875",
          "0.01900",
          "0.01925",
          "0.01950",
          "0.01975",
          "0.02000"
           ],
        "Hyderogen": [],
        "Oxygen": [],
        "Nitrogen":[]
      }
      }
     ],
  "components": [
    {
      "id": "energyGraph",
      "type": "graph",
      "streamDataFromModel": true,
      "resetAxesOnReset": true,
      "enableAutoScaleButton": true,
      "enableAxisScaling": true,
      "autoScaleX": true,
      "autoScaleY": true,
      "enableSelectionButton": false,
      "clearSelectionOnLeavingSelectMode": false,
      "enableDrawButton": false,
      "drawProperty": null,
      "markAllDataPoints": false,
      "showRulersOnSelection": false,
      "fontScaleRelativeToParent": true,
      "properties": [
        "element1KE",
        "element2KE",
        "potentialEnergy",
        "totalEnergy"
      ],
      "xProperty": "displayTime",
      "title": "Energies",
      "lineWidth": 2,
      "width": "18em",
      "height": "100%",
      "xlabel": "Time (ps)",
      "xmin": 0,
      "xmax": 0.13,
      "ylabel": "Energy (eV)",
      "ymin": -6,
      "ymax": 16,
      "xTickCount": 6,
      "yTickCount": 10,
      "xscaleExponent": 0.5,
      "yscaleExponent": 0.5,
      "xFormatter": "r",
      "yFormatter": ".1r",
      "lines": true,
      "bars": false,
      "tooltip": "",
      "dataColors": [
        "#c194ff",
        "#814ec6",
        "#70c64e",
        "#7c7c7c"
      ],
      "legendLabels": [
        "KE of reactive atoms",
        "KE of non-reactive atom",
        "Potential Energy",
        "Total Energy"
      ],
      "legendVisible": false,
      "syncXAxis": false,
      "syncYAxis": false
    },
    {
      "id": "molecule-header",
      "type": "text",
      "text": "Select molecule to break",
      "width": "auto",
      "height": "auto",
      "tooltip": ""
    },
    {
      "id": "molecule-selector",
      "type": "radio",
      "orientation": "vertical",
      "label": " ",
      "labelOn": "top",
      "options": [
        {
          "text": "Hydrogen",
          "value": 1
        },
        {
          "text": "Oxygen",
          "value": 2
        },
        {
          "text": "Nitrogen",
          "value": 3
        }
      ],
      "property": "molecule",
      "retainProperty": true,
      "disabled": false,
      "tooltip": ""
    },
    {
      "id": "third-atom-header",
      "type": "text",
      "text": "Set velocity of non-bonded atom",
      "width": "auto",
      "height": "auto",
      "tooltip": ""
    },
    {
      "id": "velocity-slider",
      "type": "slider",
      "min": 0.01400,
      "max": 0.02000,
      "steps": 24,
      "title": "Velocity (nm/fs)",
      "labels": [
        {
          "value": 0.01400,
          "label": "0.01400"
        },
        {
          "value": 0.02000,
          "label": "0.02000"
        }
      ],
      "width": "18em",
      "height": "auto",
      "displayValue": "return format('.5f')(value)",
      "property": "velocity",
      "retainProperty": true,
      "disabled": false,
      "tooltip": ""
    },
    {
      "id": "slow-motion-checkbox",
      "type": "checkbox",
      "text": "Slow motion",
      "textOn": "right",
      "width": "auto",
      "height": "auto",
      "property": "slow-motion",
      "retainProperty": true,
      "disabled": false,
      "tooltip": ""
    },
    {
      "id": "ke-shading",
      "type": "checkbox",
      "text": "kinetic energy shading",
      "textOn": "right",
      "width": "auto",
      "height": "auto",
      "property": "keShading",
      "retainProperty": true,
      "disabled": false,
      "tooltip": ""
    },
    {
      "id": "table4",
      "type": "table",
      "title": null,
      "dataSet": "table-graph-dataset",
      "addNewRows": true,
      "visibleRows": 4,
      "showBlankRow": false,
      "indexColumn": false,
      "propertyColumns": [
        {
          "name": "Velocity/Temp",
          "format": "r"
        },
        {
          "name": "Hyderogen",
          "format": "r"
        },
        {
          "name": "Oxygen",
          "format": "r"
        },
        {
          "name": "Nitrogen",
          "format": "r"
        }
      ],
      "headerData": [
        {
          "name": "Velocity/Temp",
          "editable": false
        },
        {
          "name": "Hyderogen",
          "editable": true
        },
        {
          "name": "Oxygen",
          "editable": true
        },
        {
          "name": "Nitrogen",
          "editable": true
        }
      ],
      "width": "auto",
      "height": "15em",
      "tooltip": ""
    }
  ],
  "layout": {
    "right": [
      "energyGraph"
    ],
    "bottom-left": [
      [
        "molecule-header"
      ],
      [
        "molecule-selector"
      ]
    ],
    "bottom-right": [
      [
        "third-atom-header"
      ],
      [
        "velocity-slider"
      ]
    ],
    "bottom-down": [
      "slow-motion-checkbox"
    ],
    "bottom-side": [
      "ke-shading"
    ],
    "down-side":[
    "table4"
    ]
  },
  "template": [
    {
      "id": "right",
      "height": "model.height",
      "left": "model.right",
      "padding-left": "0.5em"
    },
    {
      "id": "bottom-left",
      "width": "interactive.width/2.3",
      "top": "model.bottom",
      "padding-left": "2.3em",
      "padding-top": "0.5em"
    },
    {
      "id": "bottom-right",
      "width": "interactive.width/2",
      "top": "model.bottom",
      "left": "model.right",
      "padding-top": "0.5em",
      "padding-left": "0em"
    },
    {
      "id": "bottom-down",
      "top": "bottom-right.bottom",
      "left": "model.right",
      "padding-top": "0.5em"
    },
    {
      "id": "bottom-side",
      "top": "bottom-right.bottom",
       "left": "bottom-down.right",
      "padding-top": "0.5em",
      "padding-left": "1em"
    },
    {
      "id": "down-side",
      "top": "bottom-down.bottom",
      "padding-top": "3em",
      "padding-left": "7em"
    }
  ]
}
